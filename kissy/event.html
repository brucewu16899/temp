<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>测试</title>
<!-- KISSY 本身 -->
<script type="text/javascript" src="http://a.tbcdn.cn/s/kissy/1.3.0/kissy-min.js"></script>

<!-- CAJA 环境 r3002 -->
<script type="text/javascript" src="http://a.tbcdn.cn/apps/taesite/balcony/core/r3002/??caja/caja-min.js,caja-log-min.js,widget/gs-upload.js,widget/window-scroll.js,caja-adapter-min.js,balcony-min.js,html-widgets/switchable-min.js"></script>
</head>
<body>

<style>
.J_TCajaUploadImg {
	opacity: 0.1;
	filter: alpha(opacity=10);
	background-color: blue;
	width: 100px;
	height: 100px;
	font-size: 100px;
}
</style>

<div id="tae-js-testbed-mod" data-componentid="tae_js_testbed" class="J_TScriptedModule taeapp">
	<input type="file" name="file" class="J_TCajaUploadImg" data-url="/post/edit.php?imgupload=1" />
	<br>
	<button class="btn-upload">upload</button>
</div>

<script type="text/javascript">
KISSY.ready( function(S) {
	S.Event.delegate( document, 'change', 'input.J_TCajaUploadImg', function (e) {
		alert('delegate: ' + e);
	});

	var divUploader = S.all( '.J_TCajaUploadImg' );

	S.Event.on( divUploader, 'change', function (e) {
		alert('on: ' + e);
	});

	S.Event.on( divUploader, 'click', function (e) {
		alert('click divUploader');
	});

	S.Event.on( '.btn-upload', 'click', function(e) {
		divUploader.fire( 'click' );
	});
});
</script>
</body>
</html>